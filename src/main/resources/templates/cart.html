<!--<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Shopping Cart</title>
</head>
<body>
<h1>Shopping Cart</h1>
<table>
    <thead>
    <tr>
        <th>Order ID</th>
        <th>Product ID</th>
        <th>Product Name</th>
        <th>Product Color</th>
        <th>Product Category</th>
        <th>Product Gender</th>
        <th>Product Quantity</th>
        <th>Product Price</th>
        <th>Subtotal</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="product : ${Products}">
        <td th:text="${product.product.prodId}"></td>
        <td th:text="${product.product.prodId}"></td>
        <td th:text="${product.product.prodName}"></td>
        <td th:text="${product.product.prodColor}"></td>
        <td th:text="${product.product.prodCategory}"></td>
        <td th:text="${product.product.prodGender}"></td>
        <td>
            <form th:action="@{/updateQuantity}" method="post">
                <input type="hidden" name="productId" th:value="${product.product.prodId}"/>
                <input type="number" name="quantity" th:value="${product.quantity}" min="1"/>
                <button type="submit">Update</button>
            </form>
        </td>
        <td th:text="${product.product.prodPrice}"></td>
        <td th:text="${product.subtotal}"></td>
        <td>
            <form th:action="@{/removeItem}" method="post">
                <input type="hidden" name="productId" th:value="${product.product.prodId}"/>
                <button type="submit">Remove</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>
<h2>Total: <span th:text="${total}"></span></h2>
</body>
</html>-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
</head>
<body>
<h1>Shopping Cart</h1>
<table>
    <thead>
    <tr>
        <th>Order ID</th>
        <th>Product ID</th>
        <th>Product Name</th>
        <th>Quantity</th>
        <th>Payment ID</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <!-- Assuming "order" is the model object passed from the controller -->
    <!-- Loop through order products and display each row -->
    <tr th:each="order : ${orders}">
        <td th:text="${order.getOrderId()}"></td> <!-- Replace with actual order ID -->
        <td th:text="${order.getProducts().getProdId()}"></td> <!-- Replace with actual product ID -->
        <td th:text="${order.getProducts().getProdName()}"></td> <!-- Replace with actual product name -->
        <td th:text="${order.getProdQuantity()}"></td>
        <td>
<!--            <input type="number" th:value="${order.prodQuantity()}" onchange="updateQuantity(${order.orderId}, ${orderProduct.prodId}, this.value)">-->
        </td>
        <td></td> <!-- Replace with actual payment ID -->
        <td>
           <button onclick="removeProduct(${order.getOrderId()}, ${order.getProdId()})">Remove</button>
        </td>
    </tr>
    <!-- Repeat the above row structure for each product in the cart -->
    </tbody>
</table>

<script>
    function updateQuantity(orderId, prodId, quantity) {
        // Implement logic to send an AJAX request to update product quantity
        // You can use frameworks like jQuery or native JavaScript for AJAX
        // Example:
        // $.post("/cart/updateQuantity", {orderId: orderId, prodId: prodId, quantity: quantity}, function(data) {
        //     // Handle success or error response
        // });
    }

    function removeProduct(orderId, prodId) {
        // Implement logic to send an AJAX request to remove product
        // You can use frameworks like jQuery or native JavaScript for AJAX
        // Example:
        // $.post("/cart/removeProduct", {orderId: orderId, prodId: prodId}, function(data) {
        //     // Handle success or error response
        // });
    }
</script>
</body>
</html>

